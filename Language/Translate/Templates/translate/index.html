{% extends 'Login/base.html' %}

  {% block content %}

  <!--CTA-->
  <main class="wrapper">

    <h1>Translate</h1>
    <div class="translation__box">
      <form id="form" class="translation__input">
          {% csrf_token %}
          <textarea id="text" class="translation__input--text" name="translate"></textarea>
          <div class="translation__input--items">
            <select id="input-language" name="language" required>
                <option value="Hindi">Hindi</option>
                <option value="French">French</option>
                <option value="German">German</option>
                <option value="Spanish">Spanish</option>
            </select>
            <button type="submit">Translate</button>
          </div>
      </form>
      <div id="output" class="translation__output">

      </div>
    </div>
  <!-- XXX: http://127.0.0.1:8000/translate/translate/?translate=hello&language=hindi -->
  </main>
  <script type="text/javascript">
    const form = document.querySelector("#form")
    const text = document.querySelector("#text")
    const inputLanguage = document.querySelector("#input-language")
    const output = document.querySelector("#output")

    function render(data){
      output.innerHTML = ""
      output.innerHTML += `<p>${data}</p>`
    }

    form.addEventListener("submit",async (e)=>{
      console.log(text.value);
      e.preventDefault()
      const response = await fetch(`http://127.0.0.1:8000/translate/translate/?translate=${text.value}&language=${inputLanguage.value}`)
      const data = await response.json()
      render(data.translation)
    })
  </script>
  {% endblock %}
